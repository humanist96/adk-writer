# 금융영업부 AI 글쓰기 프로그램 구현 계획서

## 1. 프로젝트 개요

### 1.1 프로젝트 목표
Google ADK(Agent Development Kit)를 활용하여 금융영업부의 이메일, 대외문서 등을 작성하는 AI 글쓰기 파이프라인 구축

### 1.2 핵심 기능
- **초안 생성**: 금융 도메인 특화 초안 작성
- **비평 및 개선**: 작성된 내용의 품질 평가 및 개선점 도출
- **정제 및 최적화**: 비평을 반영한 최종 문서 정제
- **반복 루프**: 품질 기준 충족까지 자동 반복

### 1.3 기술 스택
- **언어**: Python 3.8+
- **프레임워크**: Google ADK (Agent Development Kit)
- **AI 모델**: Google Gemini API
- **UI**: Streamlit (웹 인터페이스)
- **데이터베이스**: SQLite (문서 템플릿 및 이력 관리)

## 2. 시스템 아키텍처

### 2.1 전체 구조
```
┌─────────────────────────────────────────────┐
│            사용자 인터페이스 (UI)             │
└─────────────────────────────────────────────┘
                      ↓
┌─────────────────────────────────────────────┐
│           LoopAgent (메인 컨트롤러)           │
│  ┌─────────────────────────────────────┐    │
│  │     SequentialAgent (파이프라인)     │    │
│  │  ┌──────┐  ┌──────┐  ┌──────┐     │    │
│  │  │초안  │→ │비평  │→ │정제  │     │    │
│  │  │작성자│  │평가자│  │작성자│     │    │
│  │  └──────┘  └──────┘  └──────┘     │    │
│  └─────────────────────────────────────┘    │
│         ↓                    ↑               │
│    [종료 조건 체크] ──────────┘               │
└─────────────────────────────────────────────┘
                      ↓
┌─────────────────────────────────────────────┐
│          커스텀 도구 & 유틸리티              │
│  - 문서 템플릿 관리                          │
│  - 금융 용어 검증                            │
│  - 규정 준수 체크                            │
└─────────────────────────────────────────────┘
```

### 2.2 에이전트 구성

#### 2.2.1 LoopAgent (메인 컨트롤러)
- **역할**: 전체 파이프라인 제어 및 종료 조건 관리
- **주요 기능**:
  - 반복 루프 제어
  - 종료 조건 평가
  - 상태 관리 및 로깅

#### 2.2.2 SequentialAgent (파이프라인 관리자)
- **역할**: 3개 하위 에이전트의 순차적 실행 관리
- **include_contents**: 'none' 설정으로 메모리 효율화

#### 2.2.3 하위 에이전트 (LlmAgent)

**1) 초안 작성자 에이전트 (DraftWriterAgent)**
- 문서 유형별 템플릿 활용
- 금융 도메인 전문 용어 적용
- 톤앤매너 조정

**2) 비평가 에이전트 (CriticAgent)**
- 문법 및 맞춤법 검사
- 금융 규정 준수 여부 확인
- 논리적 일관성 평가
- 개선점 구체적 제시

**3) 정제자 에이전트 (RefinerAgent)**
- 비평 내용 반영
- 문장 다듬기
- 최종 품질 향상

## 3. 구현 계획

### 3.1 Phase 1: 기초 설정 (Day 1-2)
- [ ] 프로젝트 구조 설정
- [ ] ADK 환경 구성
- [ ] 기본 에이전트 스켈레톤 생성

### 3.2 Phase 2: 에이전트 구현 (Day 3-5)
- [ ] LlmAgent 3개 구현
- [ ] SequentialAgent 설정
- [ ] LoopAgent 통합

### 3.3 Phase 3: 도구 및 기능 개발 (Day 6-7)
- [ ] 커스텀 도구 함수 구현
- [ ] 종료 조건 로직 구현
- [ ] 금융 도메인 특화 기능 추가

### 3.4 Phase 4: UI 및 통합 (Day 8-9)
- [ ] Streamlit UI 개발
- [ ] 시스템 통합 테스트
- [ ] 문서화

### 3.5 Phase 5: 테스트 및 최적화 (Day 10)
- [ ] 성능 테스트
- [ ] 사용자 피드백 반영
- [ ] 최종 배포 준비

## 4. 주요 구현 사항

### 4.1 종료 조건 구현
```python
def check_exit_condition(critic_feedback):
    """
    비평가의 피드백을 분석하여 종료 여부 결정
    """
    if "No major issues found" in critic_feedback:
        return True
    if calculate_quality_score(critic_feedback) >= 0.9:
        return True
    return False
```

### 4.2 커스텀 도구 예시
```python
# 금융 용어 검증 도구
def validate_financial_terms(text):
    """금융 전문 용어의 정확성 검증"""
    pass

# 규정 준수 체크 도구
def check_compliance(text, doc_type):
    """금융 규정 준수 여부 확인"""
    pass

# 템플릿 적용 도구
def apply_template(content, template_type):
    """문서 유형별 템플릿 적용"""
    pass
```

### 4.3 프롬프트 엔지니어링 전략
- **초안 작성자**: 창의적이면서도 전문적인 톤
- **비평가**: 엄격하고 구체적인 피드백
- **정제자**: 세밀하고 완성도 높은 수정

## 5. 예상 결과물

### 5.1 지원 문서 유형
- 고객 안내 이메일
- 투자 제안서
- 금융 상품 설명서
- 규정 준수 보고서
- 대외 공식 문서

### 5.2 품질 지표
- 문법 정확도: 95% 이상
- 금융 용어 정확성: 98% 이상
- 규정 준수율: 100%
- 사용자 만족도: 90% 이상

## 6. 리스크 관리

### 6.1 기술적 리스크
- API 응답 지연 → 타임아웃 설정 및 재시도 로직
- 토큰 제한 → include_contents='none' 활용
- 품질 일관성 → 엄격한 종료 조건 설정

### 6.2 비즈니스 리스크
- 규정 변경 → 정기적 업데이트 체계 구축
- 오정보 생성 → 휴먼 리뷰 프로세스 포함
- 데이터 보안 → 암호화 및 접근 제어

## 7. 향후 확장 계획
- 다국어 지원
- 실시간 협업 기능
- AI 학습 데이터 축적 및 개선
- 타 부서 확대 적용